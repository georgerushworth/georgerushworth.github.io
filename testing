{
  "$schema": "https://vega.github.io/schema/vega/v6.json",
  "autosize": {"type": "fit", "contains": "padding", "resize": false},
  "background": "#f7f7f7",
  "padding": 5,
  "height": 300,
  "style": "cell",
  "data": [
    {
      "name": "data-c554bba910a34e2fb6480135e3a2e5f8",
      "values": [
        {"decile": "Top 1%", "type": "Net Financial", "value": 17.63456872},
        {
          "decile": "10th (Highest) wealth decile",
          "type": "Net Financial",
          "value": 13.72807845
        },
        {
          "decile": "9th wealth decile",
          "type": "Net Financial",
          "value": 9.620991254
        },
        {
          "decile": "8th wealth decile",
          "type": "Net Financial",
          "value": 7.693566869
        },
        {
          "decile": "7th wealth decile",
          "type": "Net Financial",
          "value": 6.3773833
        },
        {
          "decile": "6th wealth decile",
          "type": "Net Financial",
          "value": 4.953846154
        },
        {
          "decile": "5th wealth decile",
          "type": "Net Financial",
          "value": 3.507152746
        },
        {
          "decile": "4th wealth decile",
          "type": "Net Financial",
          "value": 2.617801047
        },
        {
          "decile": "3rd wealth decile",
          "type": "Net Financial",
          "value": 2.20713073
        },
        {
          "decile": "2nd wealth decile",
          "type": "Net Financial",
          "value": 4.721030043
        },
        {
          "decile": "1st (Lowest) wealth decile",
          "type": "Net Financial",
          "value": 0
        },
        {"decile": "Top 1%", "type": "Physical", "value": 5.686079859},
        {
          "decile": "10th (Highest) wealth decile",
          "type": "Physical",
          "value": 7.731472751
        },
        {
          "decile": "9th wealth decile",
          "type": "Physical",
          "value": 9.183673469
        },
        {
          "decile": "8th wealth decile",
          "type": "Physical",
          "value": 11.19659519
        },
        {
          "decile": "7th wealth decile",
          "type": "Physical",
          "value": 12.53561254
        },
        {
          "decile": "6th wealth decile",
          "type": "Physical",
          "value": 15.16923077
        },
        {
          "decile": "5th wealth decile",
          "type": "Physical",
          "value": 18.96631287
        },
        {
          "decile": "4th wealth decile",
          "type": "Physical",
          "value": 26.17801047
        },
        {
          "decile": "3rd wealth decile",
          "type": "Physical",
          "value": 48.89643463
        },
        {
          "decile": "2nd wealth decile",
          "type": "Physical",
          "value": 84.54935622
        },
        {
          "decile": "1st (Lowest) wealth decile",
          "type": "Physical",
          "value": 100
        },
        {"decile": "Top 1%", "type": "Net Property", "value": 38.60577984},
        {
          "decile": "10th (Highest) wealth decile",
          "type": "Net Property",
          "value": 39.22308127
        },
        {
          "decile": "9th wealth decile",
          "type": "Net Property",
          "value": 42.61045077
        },
        {
          "decile": "8th wealth decile",
          "type": "Net Property",
          "value": 45.83401539
        },
        {
          "decile": "7th wealth decile",
          "type": "Net Property",
          "value": 50.40543502
        },
        {
          "decile": "6th wealth decile",
          "type": "Net Property",
          "value": 49.84615385
        },
        {
          "decile": "5th wealth decile",
          "type": "Net Property",
          "value": 43.83940932
        },
        {
          "decile": "4th wealth decile",
          "type": "Net Property",
          "value": 37.39715782
        },
        {"decile": "3rd wealth decile", "type": "Net Property", "value": 0},
        {"decile": "2nd wealth decile", "type": "Net Property", "value": 0},
        {
          "decile": "1st (Lowest) wealth decile",
          "type": "Net Property",
          "value": 0
        },
        {"decile": "Top 1%", "type": "Private Pension", "value": 38.07357159},
        {
          "decile": "10th (Highest) wealth decile",
          "type": "Private Pension",
          "value": 39.31736753
        },
        {
          "decile": "9th wealth decile",
          "type": "Private Pension",
          "value": 38.5848845
        },
        {
          "decile": "8th wealth decile",
          "type": "Private Pension",
          "value": 35.27582256
        },
        {
          "decile": "7th wealth decile",
          "type": "Private Pension",
          "value": 30.68156914
        },
        {
          "decile": "6th wealth decile",
          "type": "Private Pension",
          "value": 30.03076923
        },
        {
          "decile": "5th wealth decile",
          "type": "Private Pension",
          "value": 33.68712506
        },
        {
          "decile": "4th wealth decile",
          "type": "Private Pension",
          "value": 33.80703067
        },
        {
          "decile": "3rd wealth decile",
          "type": "Private Pension",
          "value": 48.89643463
        },
        {
          "decile": "2nd wealth decile",
          "type": "Private Pension",
          "value": 10.72961373
        },
        {
          "decile": "1st (Lowest) wealth decile",
          "type": "Private Pension",
          "value": 0
        }
      ]
    },
    {
      "name": "data_0",
      "source": "data-c554bba910a34e2fb6480135e3a2e5f8",
      "transform": [
        {
          "type": "formula",
          "expr": "datum[\"decile\"]===\"Top 1%\" ? 0 : datum[\"decile\"]===\"10th (Highest) wealth decile\" ? 1 : datum[\"decile\"]===\"9th wealth decile\" ? 2 : datum[\"decile\"]===\"8th wealth decile\" ? 3 : datum[\"decile\"]===\"7th wealth decile\" ? 4 : datum[\"decile\"]===\"6th wealth decile\" ? 5 : datum[\"decile\"]===\"5th wealth decile\" ? 6 : datum[\"decile\"]===\"4th wealth decile\" ? 7 : datum[\"decile\"]===\"3rd wealth decile\" ? 8 : datum[\"decile\"]===\"2nd wealth decile\" ? 9 : datum[\"decile\"]===\"1st (Lowest) wealth decile\" ? 10 : 11",
          "as": "y_decile_sort_index"
        }
      ]
    },
    {
      "name": "data_1",
      "source": "data_0",
      "transform": [
        {
          "type": "stack",
          "groupby": ["decile"],
          "field": "value",
          "sort": {"field": ["type"], "order": ["ascending"]},
          "as": ["value_start", "value_end"],
          "offset": "normalize"
        },
        {
          "type": "filter",
          "expr": "isValid(datum[\"value\"]) && isFinite(+datum[\"value\"])"
        }
      ]
    }
  ],
  "signals": [
    {
      "name": "width",
      "init": "isFinite(containerSize()[0]) ? containerSize()[0] : 400",
      "on": [
        {
          "update": "isFinite(containerSize()[0]) ? containerSize()[0] : 400",
          "events": "window:resize"
        }
      ]
    }
  ],
  "marks": [
    {
      "name": "marks",
      "type": "rect",
      "style": ["bar"],
      "from": {"data": "data_1"},
      "encode": {
        "update": {
          "fill": {"scale": "color", "field": "type"},
          "ariaRoleDescription": {"value": "bar"},
          "description": {
            "signal": "\"value: \" + (format(datum[\"value_end\"]-datum[\"value_start\"], \".0%\")) + \"; decile: \" + (isValid(datum[\"decile\"]) ? datum[\"decile\"] : \"\"+datum[\"decile\"]) + \"; type: \" + (isValid(datum[\"type\"]) ? datum[\"type\"] : \"\"+datum[\"type\"])"
          },
          "x": {"scale": "x", "field": "value_end"},
          "x2": {"scale": "x", "field": "value_start"},
          "y": {"scale": "y", "field": "decile"},
          "height": {"signal": "max(0.25, bandwidth('y'))"}
        }
      }
    }
  ],
  "scales": [
    {
      "name": "x",
      "type": "linear",
      "domain": [0, 1],
      "range": [0, {"signal": "width"}],
      "zero": true
    },
    {
      "name": "y",
      "type": "band",
      "domain": {
        "data": "data_0",
        "field": "decile",
        "sort": {"op": "min", "field": "y_decile_sort_index"}
      },
      "range": [0, {"signal": "height"}],
      "paddingInner": 0.1,
      "paddingOuter": 0.05
    },
    {
      "name": "color",
      "type": "ordinal",
      "domain": {"data": "data_1", "field": "type", "sort": true},
      "range": "category"
    }
  ],
  "axes": [
    {
      "scale": "x",
      "orient": "bottom",
      "gridScale": "y",
      "grid": true,
      "tickCount": {"signal": "ceil(width/40)"},
      "domain": false,
      "labels": false,
      "aria": false,
      "maxExtent": 0,
      "minExtent": 0,
      "ticks": false,
      "zindex": 0
    },
    {
      "scale": "x",
      "orient": "bottom",
      "grid": false,
      "format": ".0%",
      "labelFlush": true,
      "labelOverlap": true,
      "tickCount": {"signal": "ceil(width/40)"},
      "zindex": 0
    },
    {
      "scale": "y",
      "orient": "left",
      "grid": false,
      "labelPadding": 5,
      "ticks": false,
      "zindex": 0
    }
  ],
  "legends": [
    {
      "direction": "horizontal",
      "orient": "top",
      "fill": "color",
      "symbolType": "square"
    }
  ],
  "config": {
    "range": {
      "category": [
        "#36B7B4",
        "#E6224B",
        "#F4C245",
        "#0063AF",
        "#00A767",
        "#179FDB",
        "#EB5C2E"
      ],
      "diverging": ["#E6224B", "#E54753", "#C9C9C9", "#179FDB", "#122B39"],
      "heatmap": ["#C9C9C9", "#179FDB", "#0063AF", "#122B39"],
      "ordinal": ["#00A767", "#36B7B4", "#179FDB", "#0063AF", "#243B5A"]
    },
    "axis": {
      "labelColor": "#676A86",
      "labelFontSize": 11,
      "labelFont": "Circular Std",
      "labelOpacity": 0.7,
      "tickColor": "#676A86",
      "tickOpacity": 0.5,
      "domainColor": "#676A86",
      "domainOpacity": 0.5,
      "gridColor": "#676A86",
      "gridDash": [2, 2],
      "gridOpacity": 0.5,
      "title": null,
      "titleColor": "#676A86",
      "titleOpacity": 0.8,
      "tickSize": 4
    },
    "legend": {
      "titleColor": "#122b39",
      "title": null,
      "labelColor": "#122b39",
      "labelFontSize": 11
    },
    "style": {
      "guide-label": {"font": "Circular Std"},
      "guide-title": {"font": "Circular Std"},
      "group-title": {
        "font": "Circular Std",
        "fontSize": 14,
        "fill": "#676A86E6"
      },
      "group-subtitle": {"font": "Circular Std"},
      "cell": {"stroke": null},
      "area": {"opacity": 0.3},
      "point": {"size": 80, "opacity": 0.95},
      "rect": {"fill": "#d6d4d4", "opacity": 0.3},
      "text": {
        "font": "Circular Std",
        "align": "left",
        "baseline": "middle",
        "dx": 7,
        "dy": 0,
        "fontSize": 11
      },
      "geoshape": {"stroke": "white", "strokeWidth": 0.3}
    },
    "title": {
      "subtitleColor": "#676A86",
      "subtitleFont": "Circular Std",
      "subtitleFontSize": 12,
      "subtitlePadding": 4
    }
  }
}
