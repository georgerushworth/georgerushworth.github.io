<!doctype html>
<html class="h-100" lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
    <title>Portfolio | George Rushworth</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;600;700&family=Instrument+Serif:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="theme.css">
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2215%22 fill=%22%234269d0%22/><text x=%2250%22 y=%2250%22 text-anchor=%22middle%22 dominant-baseline=%22central%22 font-family=%22Instrument Serif, serif%22 font-size=%2240%22 font-weight=%22600%22 fill=%22white%22>GR</text></svg>">    <meta property="og:title" content="Portfolio | George Rushworth">
    <meta property="og:description" content="A portfolio of data visualization and economic analysis projects">
    
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body data-bs-spy="scroll" data-bs-target="#navScroll">

    <style>
    :root {
        --bs-body-font-family: 'Instrument Serif', serif;
        --bs-font-sans-serif: 'Instrument Sans', sans-serif;
        --accent-color: #2563eb; /* Matches your charts */
        --text-grey: #64748b;
    }
    
    body {
        background-color: #F8FAFC;
        font-family: 'Instrument Sans', sans-serif !important;
    }
    
    h1, h2, h3, h4, h5, h6 {
        font-family: 'Instrument Serif', serif !important;
        color: #1a1a1a;
    }
    
    .navbar-brand, .navbar-brand span {
        font-family: 'Instrument Serif', serif !important;
    }
    
    nav a, nav a.link-fancy, .link-fancy, .display-6 {
        font-family: 'Instrument Serif', serif !important;
    }
    
    p, li, blockquote {
        font-family: 'Instrument Sans', sans-serif !important;
        font-size: 1.15rem;
        line-height: 1.7;
        color: #334155;
    }
    
    footer, footer a {
        font-family: 'Instrument Sans', sans-serif !important;
        color: var(--text-grey) !important;
        text-decoration: none;
    }
    footer a:hover {
        color: var(--accent-color) !important;
    }
    
    /* --- TILE GRID STYLES --- */
    .chart-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 30px;
        margin: 20px 0 60px 0; /* Added bottom margin for spacing */
    }
    
    @media (max-width: 992px) {
        .chart-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }
    
    @media (max-width: 576px) {
        .chart-grid {
            grid-template-columns: 1fr;
        }
    }

    .project-card {
        background: #ffffff;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 25px;
        text-decoration: none; /* Removes link underline */
        transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
        display: flex;
        flex-direction: column;
        height: 100%;
        text-align: left;
    }

    .project-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.05);
        border-color: var(--accent-color);
    }

    .card-tag {
        font-family: 'Instrument Sans', sans-serif !important;
        font-size: 0.75rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: var(--accent-color);
        margin-bottom: 12px;
        display: block;
    }

    .project-card h4 {
        font-family: 'Instrument Serif', serif !important;
        font-size: 1.5rem;
        color: #1a1a1a;
        margin: 0 0 10px 0;
    }

    .project-card p {
        font-family: 'Instrument Sans', sans-serif !important;
        font-size: 1rem;
        color: #64748b;
        margin: 0;
        line-height: 1.5;
    }
    
    /* Small separator line */
    .separator {
        border-top: 1px solid #e2e8f0;
        margin: 40px 0;
    }
</style>

    <nav id="navScroll" class="navbar navbar-light py-vh-3 pb-0 px-vw-5" tabindex="0">
        <div class="container-fluid d-flex justify-content-between">
            <a class="navbar-brand pe-md-4 fs-4 text-center" href="index.html">
<span class="ms-md-1 mt-1 fw-bolder me-md-5" style="font-family: 'Instrument Serif', serif !important;">George Rushworth</span>
            </a>
            <div class="d-flex align-items-center">
                <a href="https://georgerushworth.github.io/index.html" aria-label="Home" class="fs-6 link-fancy me-2">
                    Home </a>
               <span class="mx-2">|</span>
                <a href="https://georgerushworth.github.io/portfolio.html" aria-label="Portfolio" class="fs-6 link-fancy me-2">
                    Portfolio </a>
                 <span class="mx-2">|</span>
                <a href="https://georgerushworth.github.io/project.html" aria-label="Project" class="fs-6 link-fancy me-2">
                    Project </a>
                <span class="mx-2">|</span>
                <a href="https://github.com/georgerushworth/georgerushworth.github.io" aria-label="GitHub" class="fs-6 link-fancy me-2">
                    GitHub </a>
                <span class="mx-2">|</span>
                <a href="https://www.linkedin.com/in/grushworth/" aria-label="LinkedIn" class="fs-6 link-fancy">
                    LinkedIn
                </a>
            </div>
        </div>
    </nav>
    <main class="container py-vh-3">

        <div class="row d-flex justify-content-center text-center">
            <div class="col-12 col-lg-10 col-xl-8">
<h1 class="display-large fw-bold">Data Visualisation Portfolio</h1>
                <p class="lead pt-2 py-vh-2">A collection of coding challenges (CC) exploring data visualisation, web scraping, APIs, and interactive charts.</p>
     
            </div>

            <div class="row d-flex justify-content-center text-start">
                <div class="col-12 col-lg-10 col-xl-8 py-vh-2">
                    
                    <h3 style="text-align: center; font-weight: bold;">Coding Challenge 1: Hosting</h3>                    
                    <p style="text-align: justify;">
                        Task: Set up a Github account and live page using GitHub Pages; add two charts using the <tt>vegaEmbed</tt> function.
                    </p>

                    <b>Chart 1: Real GDP Per Capita</b>
                    <p style="text-align: justify;">This chart shows how real GDP per capita has evolved across six countries over time.</p>
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location12"></figure>
                    </div>
                    <div style="height: 20px;"></div>

                    <b>Chart 2: G7 Inflation Rates</b>
                    <p style="text-align: justify;">This chart tracks inflation rates in four G7 economies—France, Germany, the United Kingdom, and the United States.</p>
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location18"></figure>
                    </div>
                    
                    <div style="height: 80px;"></div>
                    
                    <h3 style="text-align: center; font-weight: bold;">Coding Challenge 2: Building</h3>                    
                    <p style="text-align: justify;">Task: Build two charts using the Economics Observatory "create" tool and embed them on the page.</p>

                    <b>Chart 1: US Wealth Concentration</b>
                    <p style="text-align: justify;">This chart tracks the share of total U.S. net worth held by the top 0.1%, using FRED data.</p>
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location19"></figure>
                    </div>
                    <div style="height: 20px;"></div>

                    <b>Chart 2: China's Renewable Energy</b>
                    <p style="text-align: justify;">This visualisation shows the dramatic growth of renewable energy output in China, measured in gigawatt-hours (GWh).</p>
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location20"></figure>
                    </div>
                    
                    <div style="height: 80px;"></div>
                    
                    <h3 style="text-align: center; font-weight: bold;">Coding Challenge 3: Debating</h3>
                    <p style="text-align: justify;">Task: Produce two charts that support or refute a topic of policy debate.</p>
                    <p style="text-align: justify;">Policy Position: Governments should prioritise growth-oriented tax cuts even when unfunded, as economic expansion will generate offsetting revenues.</p>

                    <b>Chart 1: Bank Rate Response</b>
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location21"></figure>
                    </div>
                    <div style="height: 20px;"></div>
                    <p style="text-align: justify;">Commentary: Unfunded tax cuts in Truss's mini-budget fueled inflation fears, prompting steeper rate hikes that stifled growth.</p>

                    <b>Chart 2: Gilt Yield Impact</b>
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location22"></figure>
                    </div>
                    <div style="height: 20px;"></div>
                    <p style="text-align: justify;">Commentary: The mini-budget spiked gilt yields, crashed investor confidence, and proved unfunded cuts destabilise markets rather than generate revenues.</p>

                    <div style="height: 80px;"></div>
                    
                    <h3 style="text-align: center; font-weight: bold;">Coding Challenge 4: Replication</h3>
                    <p style="text-align: justify;">Task: Find a published chart, replicate it, and then improve on it.</p>
                    
                    <b>Original Chart</b>
                    <p style="text-align: justify;">This chart shows the top 10 happiest countries from the 2023 World Happiness Report, but has two issues: the bars are in reverse order (with #1 Finland having the shortest bar), and without showing the actual happiness scores or scale, it exaggerates what are small differences between similarly happy countries.</p>
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <img src="Image.jpeg" alt="Original happiness rankings chart" style="width: 600px; height: 400px; object-fit: contain; background: #F8FAFC; margin: 20px 0;">
                    </div>
                    <div style="height: 20px;"></div>

                    <b>My Replication</b>
                    <p style="text-align: justify;">I replicated the same chart with its issues in my visual style to suit my website.</p>

                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location23"></figure>
                    </div>
                    <div style="height: 20px;"></div>

                    <b>My Improvement</b>
                    <p style="text-align: justify;">I replaced misleading rank bars with actual happiness scores, showing true differences and correct direction for clearer interpretation.</p>
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location24"></figure>
                    </div>
                    <div style="height: 20px;"></div>
                    <div style="height: 80px;"></div>
                    
                    <h3 style="text-align: center; font-weight: bold;">Coding Challenge 5: Accessing Data</h3>
                    <p style="text-align: justify;">Task: Use an API and a web scraper to gather data, then create visualisations.</p>

                    <b>API Task: Cryptocurrency Price Changes</b>
                    <p style="text-align: justify;">API Description: The CoinGecko API provides cryptocurrency market data.</p>
                        
                    <p style="text-align: justify;">Full URL: <tt>https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=10</tt></p>
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location10"></figure>
                    </div>
                    <div style="height: 20px;"></div>

                    <b>Scraper Task: Forbes Billionaire Rankings</b>
                    <p style="text-align: justify;">Google Colab Notebook: <a href="https://colab.research.google.com/drive/12xg4uQ5jDTBjLSJliavehQOfCqnJH4nI" target="_blank">View scraping code</a></p>
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location11"></figure>
                    </div>
                    <div style="height: 20px;"></div>
                    <p style="text-align: justify;">Commentary: Scraped 39 years of Forbes data from Wikipedia. Main challenge: identifying correct years and handling duplicate tables.</p>

                    <div style="height: 80px;"></div>
                    
                    <h3 style="text-align: center; font-weight: bold;">Coding Challenge 6: Loops - Build a Dashboard</h3>
                    <p style="text-align: justify;">Task: Use a loop to batch download six different series and display them as a dashboard.</p>
                    <p style="text-align: justify;">Google Colab Notebook: <a href="https://colab.research.google.com/drive/109SlinKXKfli654MWXNP93OwCToqiHN5" target="_blank">View batch download code</a></p>
                    <p style="text-align: justify;">This dashboard displays six key US economic indicators (GDP, unemployment, CPI, Fed Funds Rate, 10-Year Treasury, and 30-Year Mortgage rates) from 2015 to 2025.</p>
                    
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        
                        <div style="font-family: 'Instrument Sans', sans-serif !important; font-weight: 600; font-size: 16px; color: #1a1a1a; margin-bottom: 5px;">US Economic Indicators</div>
                        <div style="font-family: 'Instrument Sans', sans-serif !important; color: #676A86; font-size: 14px; margin-bottom: 30px;">Data: Federal Reserve Economic Data (FRED) | 2015 - 2025</div>
    
    <div class="chart-grid" id="cc6_chartGrid"></div>
</div>

<div style="height: 80px;"></div>
                    
                    
                    <h3 style="text-align: center; font-weight: bold;">Coding Challenge 7: Maps</h3>
                    <p style="text-align: justify;">Task: Produce two maps - one of Scotland and one of Wales. One should be a coordinates map, the other a choropleth.</p>

                    <b>Scotland: Coordinates Map</b>
                    <p style="text-align: justify;">This chart shows the geographic distribution of schools across Scotland, with each circle representing an individual school plotted on a map of Scottish local authority districts. Hovering over points reveals further details.</p>
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location27"></figure>
                    </div>
                    <div style="height: 20px;"></div>

                    <b>Wales: Choropleth Map</b>
                    <p style="text-align: justify;">This chart shows fertility rates across Welsh local authorities in 2024, with each area shaded in blue according to its fertility rate.</p>
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location26"></figure>
                    </div>
                    
                    <div style="height: 80px;"></div>


                     <h3 style="text-align: center; font-weight: bold;">Coding Challenge 8: Big Data</h3>
                    <p style="text-align: justify;">Task: Produce two charts using either of the two UK prices datasets provided in class. </p>

                    <b>The Price of Breakfast</b>
                    <p style="text-align: justify;">Google Colab Notebook: <a href="https://colab.research.google.com/drive/1kqtPyufCpd9F6h2PwC9qWnGvgd16PxIg">View scraping code</a></p>
                    <p style="text-align: justify;">This chart shows the average prices of Full English breakfast components in the UK over time, with a stacked area visualisation breaking down costs by individual items.</p>
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location30"></figure>
                    </div>
                    <div style="height: 20px;"></div>

                    <b>The Price of Washing It Down</b>
                    <p style="text-align: justify;">Google Colab Notebook: <a href="https://colab.research.google.com/drive/1R43GV6HQDFr8wFUgZv1WC82d-U3i29MR?usp=sharing">View scraping code</a></p>
                    <p style="text-align: justify;">This interactive map shows average pint prices across UK regions with a year slider from 2000 to 2024.</p>
                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location32"></figure>
                    </div>
                    
                    <div style="height: 80px;"></div>

                    <h3 style="text-align: center; font-weight: bold;">Coding Challenge 9: Interactive Charts</h3>
                    <p style="text-align: justify;">Task: create two interactive charts with controls beyond simple hover/tooltips.</p>

                    <b>CAPE Ratio</b>
                    <p style="text-align: justify;">The chart displays the Shiller CAPE ratio from 1871 to 2025, showing market valuations over time with coloured risk zones and a historical mean line at 17. Click and drag on the bottom brush selector to zoom into specific time periods.</p>

                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location31"></figure>
                    </div>
                    <div style="height: 20px;"></div>
                    <b>Composition of the S&P 500</b>
                     <p style="text-align: justify;">The chart displays market concentration in the S&P 500 from the Magnificent 7 tech stocks versus the rest of the market over time, with an interactive selector to focus on individual stock contributions.</p>

                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location33"></figure>

                    </div>
                    
                    <div style="height: 80px;"></div>
                    
                    <h3 style="text-align: center; font-weight: bold;">Coding Challenge 10: Advanced Analytics & Machine Learning</h3>
                    <p style="text-align: justify;">Task: Produce a chart that uses advanced analytics, and then conduct an applied data analysis using machine learning techniques.</p>
                                            
                    <b>Bubble Chart</b>
                    <p style="text-align: justify;">This interactive bubble chart plots the top S&P 500 companies by earnings growth versus valuation (P/E ratio). You can filter to show "Magnificent 7" companies only.</p>

                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location36"></figure>
                    </div>
                    <div style="height: 20px;"></div>

                    <b>Linear Regression</b>

                    <p style="text-align: justify;">This regression shows the relationship between state GDP per capita and AI usage index.</p>
                    <p style="text-align: justify;">Google Colab Notebook: <a href="https://colab.research.google.com/drive/1l10BK03cZC-Pqw8QB15DyPOM5j3lRDKw" target="_blank">View code</a></p>

                    <div style="text-align: center;">
                        <div style="height: 20px;"></div>
                        <figure id="Location43"></figure>
                    </div>
                    <div style="height: 20px;"></div>

                </div>
            </div>
    </main>

     <footer class="container py-4 border-top">
        <div class="row">
            <div class="col-12 text-center small">
                <p class="mb-1">© 2025 George Rushworth</p>
                <p class="mb-0">
                    <a href="https://github.com/georgerushworth/georgerushworth.github.io" class="me-2">GitHub</a> 
                    <a href="https://www.linkedin.com/in/grushworth/">LinkedIn</a>
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Chart specifications
        let figure_2_spec = "wk1_chart2.json";
        let figure_3_spec = "https://rdeconomist.github.io/charts/library/chartLine2.json";
        let figure_4_spec = "visualization.vl-3.json";
        let figure_5_spec = "visualization.vl-4.json";
        let figure_6_spec = "visualization.vl-6.json";
        let figure_7_spec = "visualization.vl-7.json";
        let figure_8_spec = "visualization.vl-8.json";
        let figure_9_spec = "visualization.vl-9.json";
        let figure_10_spec = "visualization.vl-10.json";
        let figure_11_spec = "visualization.vl-11.json";
        let figure_12_spec = "visualization.vl-2.json";
        let figure_18_spec = "visualization.vl-18.json";
        let figure_19_spec = "visualization.vl-19.json";
        let figure_20_spec = "visualization.vl-20.json";
        let figure_21_spec = "visualization.vl-21.json";
        let figure_22_spec = "visualization.vl-22.json";
        let figure_23_spec = "visualization.vl-23.json";
        let figure_24_spec = "visualization.vl-24.json";        
        let figure_26_spec = "visualization.vl-26.json";        
        let figure_27_spec = "visualization.vl-27.json";        
        let figure_28_spec = "visualization.vl-28.json";
        let figure_30_spec = "visualization.vl-30.json";        
        let figure_31_spec = "visualization.vl-31.json";        
        let figure_32_spec = "visualization.vl-32.json";
        let figure_33_spec = "visualization.vl-33.json";
        let figure_36_spec = "visualization.vl-36.json";
        let figure_43_spec = "visualization.vl-43.json";

        // Embed completed charts
        vegaEmbed('#Location2', figure_2_spec);
        vegaEmbed('#Location3', figure_3_spec);
        vegaEmbed('#Location4', figure_4_spec);
        vegaEmbed('#Location5', figure_5_spec);
        vegaEmbed('#Location6', figure_6_spec);
        vegaEmbed('#Location7', figure_7_spec);
        vegaEmbed('#Location8', figure_8_spec);
        vegaEmbed('#Location9', figure_9_spec);
        vegaEmbed('#Location10', figure_10_spec);
        vegaEmbed('#Location11', figure_11_spec);
        vegaEmbed('#Location12', figure_12_spec);
        vegaEmbed('#Location18', figure_18_spec);
        vegaEmbed('#Location19', figure_19_spec);
        vegaEmbed('#Location20', figure_20_spec);
        vegaEmbed('#Location21', figure_21_spec);
        vegaEmbed('#Location22', figure_22_spec);
        vegaEmbed('#Location23', figure_23_spec);
        vegaEmbed('#Location24', figure_24_spec);        
        vegaEmbed('#Location26', figure_26_spec);        
        vegaEmbed('#Location27', figure_27_spec);
        vegaEmbed('#Location28', figure_28_spec);
        vegaEmbed('#Location30', figure_30_spec);      
        vegaEmbed('#Location31', figure_31_spec);        
        vegaEmbed('#Location32', figure_32_spec);      
        vegaEmbed('#Location33', figure_33_spec);
        vegaEmbed('#Location36', figure_36_spec);
        vegaEmbed('#Location43', figure_43_spec);

        // Coding Challenge 6: Loop to create dashboard
const cc6_series = [
    {
        url: 'https://raw.githubusercontent.com/georgerushworth/georgerushworth.github.io/refs/heads/main/us_gdp.json',
        title: 'US GDP (Billions $)'
    },
    {
        url: 'https://raw.githubusercontent.com/georgerushworth/georgerushworth.github.io/refs/heads/main/us_unemployment.json',
        title: 'US Unemployment (%)'
    },
    {
        url: 'https://raw.githubusercontent.com/georgerushworth/georgerushworth.github.io/refs/heads/main/us_inflation.json',
        title: 'US CPI (Index)'
    },
    {
        url: 'https://raw.githubusercontent.com/georgerushworth/georgerushworth.github.io/refs/heads/main/us_10year_treasury.json',
        title: '10-Year Treasury (%)'
    },
    {
        url: 'https://raw.githubusercontent.com/georgerushworth/georgerushworth.github.io/refs/heads/main/us_fed_funds_rate.json',
        title: 'Fed Funds Rate (%)'
    },
    {
        url: 'https://raw.githubusercontent.com/georgerushworth/georgerushworth.github.io/refs/heads/main/us_mortgage_rate.json',
        title: '30-Year Mortgage (%)'
    }
];

// LOOP to create and embed all 6 charts
cc6_series.forEach((item, index) => {
    const container = document.createElement('figure');
    container.id = `cc6_chart${index}`;
    document.getElementById('cc6_chartGrid').appendChild(container);

    const spec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "width": 200,
        "height": 150,
        "title": {
            "text": item.title,
            "font": "Instrument Sans, sans-serif",
            "fontSize": 13,
            "fontWeight": 600,
            "color": "#1a1a1a",
            "anchor": "start",
            "offset": 8
        },
        "data": {
            "url": item.url,
            "format": {"type": "json", "property": "observations"}
        },
        "transform": [
            {"filter": "datum.value != '.'"},
            {"filter": "toDate(datum.date) >= toDate('2015-01-01')"}
        ],
        "encoding": {
            "x": {
                "field": "date",
                "type": "temporal",
                "title": null,
                "axis": {
                    "grid": false,
                    "labelColor": "#676A86",
                    "labelFontSize": 10,
                    "labelOpacity": 0.7,
                    "tickColor": "#676A86",
                    "tickOpacity": 0.5,
                    "domainColor": "#676A86",
                    "domainOpacity": 0.5,
                    "format": "%Y"
                }
            }
        },
        "layer": [
            {
                "mark": {
                    "type": "line",
                    "color": "#4269d0",
                    "strokeWidth": 2
                },
                "encoding": {
                    "y": {
                        "field": "value",
                        "type": "quantitative",
                        "scale": {"zero": false},
                        "title": null,
                        "axis": {
                            "gridColor": "#676A86",
                            "gridDash": [1, 5],
                            "gridOpacity": 0.5,
                            "labelColor": "#676A86",
                            "labelFontSize": 10,
                            "labelOpacity": 0.7,
                            "tickColor": "#676A86",
                            "tickOpacity": 0.5,
                            "domainColor": "#676A86",
                            "domainOpacity": 0.5,
                            "tickCount": 4
                        }
                    }
                }
            },
            {
                "mark": "rule",
                "encoding": {
                    "opacity": {
                        "condition": {"value": 0.3, "param": "hover", "empty": false},
                        "value": 0
                    },
                    "tooltip": [
                        {"field": "date", "type": "temporal", "title": "Date", "format": "%b %Y"},
                        {"field": "value", "type": "quantitative", "title": "Value", "format": ".2f"}
                    ]
                },
                "params": [
                    {
                        "name": "hover",
                        "select": {
                            "type": "point",
                            "fields": ["date"],
                            "nearest": true,
                            "on": "pointerover",
                            "clear": "pointerout"
                        }
                    }
                ]
            }
        ],
        "config": {
            "font": "Instrument Sans, sans-serif",
            "view": {"stroke": "transparent"},
            "background": "#F8FAFC"
        }
    };

    vegaEmbed(`#cc6_chart${index}`, spec, {actions: false});
});

        // Handle footnote links smoothly
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'A' && e.target.hash) {
                e.preventDefault();
                const targetId = e.target.hash.slice(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    setTimeout(() => {
                        targetElement.scrollIntoView({ behavior: 'smooth' });
                    }, 0);
                    window.location.hash = targetId;
                }
            }
        });

        // Handle external links
        document.querySelectorAll("a").forEach(link => {
            const href = link.href.toLowerCase();
            const currentDomain = window.location.hostname;
            const isInternalLink = href.includes('#') || link.hostname === currentDomain;
            
            if (!isInternalLink) {
                link.setAttribute("target", "_blank");
                link.setAttribute("rel", "noopener noreferrer");
            } else {
                link.removeAttribute("target");
            }
        });
    </script>
</body>
</html>
